"use strict";angular.module("give-website").controller("AboutController",["$scope",function(a){a.init=function(){a.$emit("controller.init",{name:"About",scope:a})},a.init()}]),angular.module("give-website").controller("AppController",["$rootScope","Utils","localStorageService","$state","$window","$interval","$timeout","modalService",function(a,b,c,d,e,f,g,h){a.is_loading=!0,a.alerts={},a.alert_counter=0,a.timer=null,a.OAD=OAD,self.addAlert=a.addAlert=function(c,d,e){["error","info","danger","success","warning"].indexOf(c)>-1&&(a.alerts[++a.alert_counter]={type:"error"==c?"danger":c,msg:d||"",sticky:!!e,ts:e?null:(new Date).getTime()}),g(function(){b.scrollViewportToTop(1)},150)},a.deleteAlert=function(b){a.alerts[b]&&(delete a.alerts[b],a.alert_counter--)},a.$on("system.alert",function(b){a.addAlert(b.type,b.message,b.is_sticky)}),a.windowResizeEvent=_.debounce(function(b){a.$broadcast("app.window.resize",{viewport:{height:window.innerHeight,width:window.innerWidth}})},250),a.cleanUpAlerts=function(){$('.notifications__alert[data-sticky!="true"]').each(function(){var b=parseInt(this.getAttribute("data-ts")),c=(new Date).getTime();(c-b)/1e3>OAD.ALERT_VISIBILITY_PERIOD_SECS&&a.deleteAlert(this.getAttribute("data-index"))})},self.disableAlertCleanup=a.disableAlertCleanup=function(){f.cancel(a.timer)},a.showTodo=function(){h.show({templateUrl:"views/widgets/ui-widget.modal.html"},{title:"Under construction",content:"Please bear with us while we work at releasing this functionality!",buttons:[{label:"Ok",is_primary:!0,is_cancel:!0,click:function(){}}]})},a.$on("controller.init",function(b,c){$("body").removeAttr("data-loading"),a.is_loading=!1,a.windowResizeEvent(b),console.log('[INIT] State Initialised "'+c.name+'"'),OAD.outputLine()}),a.onInit=function(){var b=c.get(OAD.CookieNames.Version);b&&OAD.VERSION&&OAD.VERSION==b||(c.clearAll(),console.log("Version "+OAD.VERSION+" found, localStorage data reset."),c.set(OAD.CookieNames.Version,OAD.VERSION)),angular.element(e).bind("resize",a.windowResizeEvent),a.$on("$stateChangeSuccess",a.windowResizeEvent),a.timer=f(a.cleanUpAlerts,1e3*OAD.ALERT_VISIBILITY_CHECKER_INTERVAL_SECS);var d=$(e).eq(0),g=$("body").eq(0);d.on("scroll",function(a){d.scrollTop()>1?g.addClass("scrolled-away"):g.removeClass("scrolled-away")}),console.log("[INIT] App Initialised."),OAD.outputLine()}()}]),angular.module("give-website").controller("ContactController",["$scope",function(a){a.init=function(){a.$emit("controller.init",{name:"Contact",scope:a})},a.init()}]),angular.module("give-website").controller("HomeController",["$scope",function(a){a.init=function(){a.$emit("controller.init",{name:"Home",scope:a})},a.$on("youtube.player.ready",function(){}),a.$on("youtube.player.playing",function(){}),a.$on("youtube.player.paused",function(){}),a.init()}]),angular.module("give-website").controller("RegisterController",["$scope","$resource",function(a,b){a.register_showing=!1,a.user={name:"",email:""},a.backupUser=angular.copy(a.user),a.is_saving=!1,a.registerUser=function(){a.is_saving=!0;var c=a.user.name.split(" "),d=b("//givewithimpact.us12.list-manage.com/subscribe/post-json",{EMAIL:a.user.email,FNAME:c[0],LNAME:c.length>1?c[1]:"",c:"JSON_CALLBACK",u:"0018d06d9acc860bc57431c3c",id:"1a1f06f6e6"},{save:{method:"jsonp"}}),e=function(b){a.addAlert("warning",b),a.is_saving=!1};d.save(function(b){if("error"===b.result)if(b.msg){var c=b.msg.split(" - ");c.length>1&&c.shift();var d=c.join(" ");switch(!0){case d.indexOf("already subscribed")>-1:d="Sorry but this email address is already subscribed!"}e(d)}else e("Sorry! An unknown error occurred.");else"success"===b.result&&(a.addAlert("success","Registration is successful, please check your email for confirmation!"),a.is_saving=!1,a.register_showing=!1,a.RegisterForm.$setPristine(),a.user={name:"",email:""})},function(a){e(a)})},a.init=function(){a.$emit("controller.init",{name:"Register",scope:a})},a.init()}]),angular.module("give-website").filter("titlecase",function(){return function(a){return(a||"").length>0?a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):""}}),angular.module("give-website").service("modalService",["$uibModal",function(a){var b={backdrop:"static",keyboard:!0,modalFade:!0,templateUrl:"views/widgets/ui-widget.modal.html"},c={title:"Proceed?",content:"Perform this action?",buttons:[{label:"OK",is_primary:!0,is_cancel:!1}]};this.show=function(d,e){function f(a,b){a.modalOptions=g,a.Math=Math;for(var c=0;c<a.modalOptions.buttons.length;c++){var d=a.modalOptions.buttons[c];d.handler=function(a){this.click&&this.click(),this.is_cancel?b.dismiss("cancel"):b.close(a)},a.modalOptions.buttons[c]=d}}var g={},h={};return angular.extend(h,b,d),angular.extend(g,c,e),h.controller||(h.controller=f,f.$inject=["$scope","$uibModalInstance"]),a.open(h)}}]),angular.module("give-website").factory("Utils",function(){return{normalizeWhitespace:function(a){var b=a.replace(/^\n/,""),c=new RegExp("(?:^|\n)([ 	\r]+)").exec(b)[1].length;return b.replace(new RegExp("(^|\n)[ 	\r]{"+c+"}","g"),"$1")},removeTextNodes:function(a){if(a)for(var b=0;b<a.length;b++)"#text"==a[b].nodeName.toLowerCase()&&a.splice(b,1);return a},toTitleCase:function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},ucWords:function(a){return(a+"").replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})},getMultiSelectArray:function(a){var b=new Array;if(a&&$.isArray(a.val())&&a.val().length>0)for(var c=a.val(),d=0;d<c.length;d++)c[d].length>0&&b.push(c[d]);return b},getSetNodeId:function(a){var b=$(a),c=!1;return b.length>0&&(c=b.attr("id"),c&&0!=c.length||(c="_"+(new Date).getTime()+"_"+Math.floor(101*Math.random()),b.attr("id",c))),c},getQStudioDate:function(a){var b=Math.floor(a),c=new moment(0).year(b);return c.add((new moment(0).year(b+1)-c)*(a-b),"milliseconds")},makeMachineName:function(a){if(a&&a.length>0){var b=a.replace(/[^a-zA-Z0-9_ ]/g,"");return b=b.replace(/\s+/g,"_"),b.toLowerCase()}return""},makeFriendlyName:function(a){if(a&&a.length>0){var b=a.replace(/[_-]/g," ");return this.ucWords(b)}return""},makeHistoricalDate:function(a,b,c){var d=moment().subtract(a,b).hours(0).minutes(0).seconds(0);return{label:d.format("MMMM Do, YYYY")+" ("+c+")",value:a+"_"+b}},makeRandomHexColour:function(){return Math.floor(16777215*Math.random()).toString(16)},makeRandomInt:function(a,b){return Math.floor(Math.random()*b+a)},escapeHtml:function(a){var b=document.createElement("div");return b.appendChild(document.createTextNode(a)),b.innerHTML},averageFromArray:function(a){return _.reduce(a,function(a,b){return a+b},0)/(0===a.length?1:a.length)},flattenCoordinatesArray:function(a){if(angular.isObject(a)){for(var b=[],c=0;c<a.x.length;c++)b.push([a.x[c],a.y[c]]);return b}return!1},scrollToElement:function(a,b,c,d,e){d=d||400,c=c||a.offset().top;var f=b.offset()?b.offset().top:0,g=c===!1?0:parseInt(f-c+a.scrollTop());return a.stop(!0).animate({scrollTop:g},d,e),this},scrollViewportToElement:function(a,b,c){var d=$("#view-panel"),e=d.offset().top||126;return this.scrollToElement(d,a,e,b,c),this},scrollViewportToTop:function(a,b){var c=$("#view-panel");return c.stop().animate({scrollTop:0},a,b),this}}}),Array.prototype.getIndexBy=function(a,b){for(var c=0;c<this.length;c++)if(this[c][a]==b)return c},Number.prototype.toAlwaysFixed=function(a){var b=parseFloat(this);return isNaN(b)?this:b.toFixed(a)},angular.module("give-website").directive("compile",["$compile",function(a){return function(b,c,d){b.$watch(function(a){return a.$eval(d.compile)},function(d){c.html(d),a(c.contents())(b)})}}]),angular.module("give-website").directive("htmlRender",function(a){return{restrict:"E",scope:{html:"@"},link:function(b,c){b.$watch("html",function(d){if(d){var e=a(d)(b);c.append(e)}})}}});